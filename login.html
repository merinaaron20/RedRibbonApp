<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<link rel="stylesheet" href="themes/jquery.min.css" />
	<link rel="stylesheet" href="themes/jquery.mobile.icons.min.css" />
	<link rel="stylesheet" href="themes/jquery.mobile.structure-1.4.3.min.css" />
	<script src="themes/jquery-1.11.1.min.js"></script>
	<script src="themes/jquery.mobile-1.4.3.min.js"></script>

</head>
<style>
	.custom-btn {
    width: 15% !important;
}
</style>
<style type="text/css">
		.bg1 {
			background-image: url(images/aw.jpg);
			background-size: cover;
			background-repeat: no-repeat;
		}
		.bg {
			background-image: url(images/aw.jpg);
			background-size: cover;
			background-repeat: no-repeat;
		}


</style>

<body>

<div data-role="page" class="bg1" id="index"><!--page index-->
 <div data-role="header" data-position="fixed">
	<h2><div><img src="images/logo1.png" style="max-width:50%;"></div></h2>

</div>
<div>


<div  data-role="content">
<center>
<div class="text-center" style="vertical-align:middle"><img src="images/rrb.png" style="max-width:50%;"></div>

	<div  style="background-color:#ff0000;height:150px; border-radius: 5px;">

	<form id="loginform" name="myForm" action="javascript: verifyLoginfirst()">
			<div style="width: 90%;" >
			<br>
			<input type="text" class="ui-input-text " name="name" id="login_username" placeholder="Username" >
			
			<input type="password" class="ui-input-text " name="pw" id="login_password" placeholder="Password" >
			<button type="submit" class="ui-btn ui-shadow ui-corner-all ui-btn-icon-left ui-icon-user" id="btnlogin">Log In</button>
			</div>
			<!--prompt msg-->
				<div data-role="popup" style="font-size:20px" id="popupUserPass" class="ui-content" style="max-width:280px" data-overlay-theme="a">
				<a href="#" data-rel="back" style="font-size:20px;" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-left">Close</a>
				<p><b>Please Enter Username/Password</b></p>
				</div>
			<!--end of prompt msg-->
			
			<!--prompt msg-->
				<div data-role="popup" style="font-size:20px" id="popupUserPassReg" class="ui-content" style="max-width:280px" data-overlay-theme="a">
				<a href="#" data-rel="back" style="font-size:20px" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-left">Close</a>
				<p><b>The account you've entered is not registered.</b></p>
				</div>
			<!--end of prompt msg-->
			
			<!--prompt msg-->
				<div data-role="popup" style="font-size:20px" id="popupIncorrectPass" class="ui-content" style="max-width:280px" data-overlay-theme="a">
				<a href="#" data-rel="back" style="font-size:20px" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-left">Close</a>
				<p><b>Incorrect password. Please Try Again</b></p>
				</div>
			<!--end of prompt msg-->
			
			<!--prompt msg-->
				<div data-role="popup" style="font-size:20px" id="popupInternetProb" class="ui-content" style="max-width:280px" data-overlay-theme="a">
				<a href="#" data-rel="back" style="font-size:20px" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-left">Close</a>
				<p><b>Problem with your login, Please check internet connection or try again later.</b></p>
				</div>
			<!--end of prompt msg-->
			
	</form>		
	
</center>
<br>
<center>
<div>
		<a href="#register" style="width: 50%;" data-transition="slide" class="ui-btn ui-shadow ui-corner-all ui-btn-icon-left ui-icon-edit">Sign Up</a>
</div>
	</center>
</div>

</div>
<div data-role="footer" data-position="fixed">
<div data-role="navbar">
        <ul>
            <li><a onClick="document.location.href='main_forum.php'" data-icon="comment">Forum</a></li>
            <li><a  data-icon="user"><span span style="color: #ff0000;">Account</span></a></li>
        </ul>
</div><!-- /navbar -->
</div>
</div>
</div><!-- end of page index-->

<!----------------------------------------------------------------------------------------------------------------------------------------------->
<!----------------------------------------------------------------------------------------------------------------------------------------------->
<!----------------------------------------------------------------------------------------------------------------------------------------------->

<div data-role="page" id="register" class="bg"><!--page register-->
 <div data-role="header" data-position="fixed">
<h2><div><img src="images/logo1.png" style="max-width:50%;"></div></h2>
<a href="#index" data-transition="slide" data-direction="reverse" style="width:15%" data-icon="back"><span style="font-size:12pt;">&nbsp;Back</a>

</div>

<center>
<div  data-role="content">
<div class="text-center" style="vertical-align:middle"><img src="images/rrb.png" style="max-width:50%;"></div>

	<div id="register_content" style="background-color:#ff0000;height:240px;width: 90%; border-radius: 5px;">
	<form id="regForm" action="javascript:verifyRegfirst()">
		<div style="width:90%">
		<br>
			<input type="text" name="username" id="username" placeholder="Username" />
			<input type="email" name="email" id="uemail" placeholder="example@yahoo.com" />
			<input type="password" name="password" id="upassword" placeholder="Password" />
			<input type="password" id="ucpassword" placeholder="Confirm Password" />
			<button type="submit" style="width: 90%;" class="ui-btn ui-shadow ui-corner-all ui-btn-icon-left ui-icon-check" id="registerUser">Submit</button>
			<!--prompt msg-->
				<div data-role="popup" style="font-size:20px" id="popupForm" class="ui-content" style="max-width:280px" data-overlay-theme="a">
				<a href="#" data-rel="back" style="font-size:20px" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-left">Close</a>
				<p><b>Please complete the form.</b></p>
				</div>
			<!--end of prompt msg-->
			
			<!--prompt msg-->
				<div data-role="popup" style="font-size:20px" id="popupPassword" class="ui-content" style="max-width:280px" data-overlay-theme="a">
				<a href="#" data-rel="back" style="font-size:20px" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-left">Close</a>
				<p><b>Password did not match.</b></p>
				</div>
			<!--end of prompt msg-->
			
			<!--prompt msg-->
				<div data-role="popup" style="font-size:20px" id="popupEmail" class="ui-content" style="max-width:280px" data-overlay-theme="a">
				<a href="#" data-rel="back" style="font-size:20px" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-left">Close</a>
				<p><b>This email is already in use.</b></p>
				</div>
			<!--end of prompt msg-->
			
			<!--prompt msg-->
				<div data-role="popup" style="font-size:20px" id="popupUser" class="ui-content" style="max-width:280px" data-overlay-theme="a">
				<a href="#" data-rel="back" style="font-size:20px" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-left">Close</a>
				<p><b>This username is already in use.</b></p>
				</div>
			<!--end of prompt msg-->
			
			<!--prompt msg-->
				<div data-role="popup" style="font-size:20px" id="popupRegFail" class="ui-content" style="max-width:280px" data-overlay-theme="a">
				<a href="#" data-rel="back" style="font-size:20px" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-left">Close</a>
				<p><b>Registration Failed!</b></p>
				</div>
			<!--end of prompt msg-->
			
			<!--prompt msg-->
				<div data-role="popup" style="font-size:20px" id="popupInternetRegFail" class="ui-content" style="max-width:280px" data-overlay-theme="a">
				<a href="#" data-rel="back" style="font-size:20px" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-left">Close</a>
				<p><b>Problem with your login, Please check internet connection or try again later.</b></p>
				</div>
			<!--end of prompt msg-->
			
			<!--prompt msg-->
				<div data-role="popup" style="font-size:20px" id="popupRegComplete" class="ui-content" style="max-width:100%" data-overlay-theme="a">
				<a href="#" data-rel="back" style="font-size:20px" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-left">Close</a>
				<p><b>Registration Complete!</b></p>
				
						<div style="width: 100%;" >
						
						<a href="#index" data-transition="slide" data-direction="reverse" class="ui-btn ui-shadow ui-corner-all ui-btn-icon-left ui-icon-user" id="btnlogin2">Log In</a>
						
				</div>
				</div>
			<!--end of prompt msg-->
			
		</div>
	</form>
	</div>
	<br>
	<br>
</center>	
<div data-role="footer" data-position="fixed">
<div data-role="navbar">
        <ul>
            <li><a onClick="document.location.href='main_forum.php'" data-icon="comment">Forum</a></li>
            <li><a  data-icon="user"><span span style="color: #ff0000;">Account</span></a></li>
        </ul>
</div><!-- /navbar -->
</div>

</div>
</div><!-- end of page register-->

<!----------------------------------------------------------------------------------------------------------------------------------------------->
<!----------------------------------------------------------------------------------------------------------------------------------------------->
<!----------------------------------------------------------------------------------------------------------------------------------------------->


</body>






<script type="text/javascript">

	function verifyRegfirst(){
	var rform = $("#regForm");
		if($( "#username" ).val() == "" || $( "#upassword" ).val() == "" || $( "#uemail" ).val() == "" || $( "#ucpassword" ).val() == "")	//do when fields are nothing
		{
			$( "#popupForm" ).popup( "open" );
			
		}else if($("#upassword").val() != $("#ucpassword").val()){
		
			$( "#popupPassword" ).popup( "open" );
			
		}else{
			$.getJSON("php_files/register_check.php?callback=?",rform.serialize(), function(data)	//check email
			{
			
				if (data.eexists == "exists")		//check if email exists
				{
					$( "#popupEmail" ).popup( "open" );
				}
				else if(data.uexists == "exists")
				{									//check if username already taken
					
					$( "#popupUser" ).popup( "open" );

				}
				else
				{
					$.getJSON("php_files/register_user.php?callback=?",rform.serialize(), function(data)
					{
						$("#username").val("");
						$("#uemail").val("");
						$("#upassword").val("");
						$("#ucpassword").val("");
		
						$( "#popupRegComplete" ).popup( "open" ); 

						//check if login
						var a = window.localStorage.getItem("username");
						if(a == "null" || a == "" || a == "undefined"){
							
					//		window.location.href = "#index";		//set localstorage to username then navigate to index
							
						}else{

						
						alert("2"); // alert for not connected status
						}
						
					}).fail(function(){
					
						$( "#popupRegFail" ).popup( "open" ); // fail
					});

				}
			}).fail(function(data){
				
				$( "#popupInternetRegFail" ).popup( "open" );
				// no internet
				
			});
		}
	}
		
	</script>
	
	
<script type="text/javascript">
	var lform = $("#loginform");
	function verifyLoginfirst(){
		if($( "#login_username" ).val() == "" || $( "#login_password" ).val() == "")
		{
			$( "#popupUserPass" ).popup( "open" );
		return;
		}
			$.getJSON("php_files/login.php?callback=?",lform.serialize(), function(data)
			{
			
				if (data.allow == "yes")
				{
				
					localStorage.setItem("username", data.username);			//just some login scripts nothing special
					localStorage.setItem("user_id",data.user_id);
					
					location.href="main_forum2.php";
				//	$.mobile.pageContainer.pagecontainer("change", "index.html#main", {transition: "slideup"});
				//	window.location.reload(true);
				//	$.mobile.pageContainer.pagecontainer("change", "index.html#main");
         //   $(':mobile-pagecontainer').pagecontainer('change', 'index.html#main', {
		//			transition: 'slide',
		//			changeHash: true,
		//			reverse: false,
		//			showLoadMsg: true,
		//			reload: true
		//		});
               
		//	location.reload();




                //    $.mobile.pageContainer.pagecontainer( "change", "index.html#main", { reload: true} );
                
              
       
				}
				else if(data.allow == "no")				//responses  no - does not exist maybe= incoreect password and none problem with internet
				{
					$( "#popupUserPassReg" ).popup( "open" );

				}
				else if(data.allow == "maybe")
				{
				 
					$( "#popupIncorrectPass" ).popup( "open" );

				}else{
					$( "#popupInternetProb" ).popup( "open" );
				}
			}).fail(function(data){
				
				$( "#popupInternetProb" ).popup( "open" );
				
				
			});
		}
		


		
</script>




</body>


</html>